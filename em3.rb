#!/usr/bin/env ruby

require 'em-http'
require 'json'
require 'fiber'
require 'rubygems'

list=%w{
/zy/Public/upload/image/46700
/zy/Public/upload/image/1389854090_1318520355.jpg
/zy/Public/upload/image/1389854093_561420623.jpg
/zy/Public/upload/image/1389854095_750890472.jpg
/zy/Public/upload/image/1389854097_738284485.jpg
/zy/Public/upload/image/1389854099_690197552.jpg
/zy/Public/upload/image/1389854101_1451037587.jpg
/zy/Public/upload/image/1390235029_952842257.png
/zy/Public/upload/image/1390235037_994394313.png
/zy/Public/upload/image/1390235039_133668445.png
/zy/Public/upload/image/1390235041_277031509.png
/zy/Public/upload/image/1390235043_697722807.png
/zy/Public/upload/image/1390235046_197202729.png
/zy/Public/upload/image/1390292950_270672359.jpg
/zy/Public/upload/image/1390292958_706543877.jpg
/zy/Public/upload/image/1390293376_867357260.JPG
/zy/Public/upload/image/1390293382_400675090.JPG
/zy/Public/upload/image/1390293396_1773036372.JPG
/zy/Public/upload/image/1390293403_2012352170.JPG
/zy/Public/upload/image/1390293409_230677954.JPG
/zy/Public/upload/image/1390293415_1441212620.JPG
/zy/Public/upload/image/1390293668_1617340114.JPG
/zy/Public/upload/image/1390293694_1024206223.JPG
/zy/Public/upload/image/1390293734_1617209463.JPG
/zy/Public/upload/image/1390293795_1110656079.JPG
/zy/Public/upload/image/1390293833_2147343317.JPG
/zy/Public/upload/image/1390293852_294280454.JPG
/zy/Public/upload/image/1390293875_745989348.JPG
/zy/Public/upload/image/1390293897_614457500.JPG
/zy/Public/upload/image/1390293948_1805667431.JPG
/zy/Public/upload/image/1390311264_1084865805.jpg                                                                                                                
/zy/Public/upload/image/1390311267_993443552.jpg                                                                                                                 
/zy/Public/upload/image/1390311293_684191316.jpg                                                                                                                 
/zy/Public/upload/image/1390311296_1469199046.jpg                                                                                                                
/zy/Public/upload/image/1390311320_263481648.jpg                                                                                                                 
/zy/Public/upload/image/1390311323_1770568435.jpg                                                                                                                
/zy/Public/upload/image/1390311340_1735735373.jpg                                                                                                                
/zy/Public/upload/image/1390311344_914887941.jpg                                                                                                                 
/zy/Public/upload/image/1390311359_443562148.jpg                                                                                                                 
/zy/Public/upload/image/1390311361_1073222510.jpg                                                                                                                
/zy/Public/upload/image/1390311378_1013050257.jpg                                                                                                                
/zy/Public/upload/image/1390311381_757073002.jpg                                                                                                                 
/zy/Public/upload/image/1390311401_14063072.jpg                                                                                                                  
/zy/Public/upload/image/1390311403_560682563.jpg                                                                                                                 
/zy/Public/upload/image/1390311428_877829258.jpg                                                                                                                 
/zy/Public/upload/image/1390311431_1294709085.jpg                                                                                                                
/zy/Public/upload/image/1390311454_772264088.jpg                                                                                                                 
/zy/Public/upload/image/1390311457_1688283832.jpg                                                                                                                
/zy/Public/upload/image/1390311480_2140029385.jpg                                                                                                                
/zy/Public/upload/image/1390311482_1335710112.jpg                                                                                                                
/zy/Public/upload/image/1390311498_605837559.jpg                                                                                                                 
/zy/Public/upload/image/1390311500_604006704.jpg                                                                                                                 
/zy/Public/upload/image/1390311516_759770860.jpg                                                                                                                 
/zy/Public/upload/image/1390311518_1217035590.jpg                                                                                                                
/zy/Public/upload/image/1390311534_949645535.jpg                                                                                                                 
/zy/Public/upload/image/1390311536_749096156.jpg                                                                                                                 
/zy/Public/upload/image/1390311561_1724417823.jpg                                                                                                                
/zy/Public/upload/image/1390311563_2118443375.jpg                                                                                                                
/zy/Public/upload/image/1390625247_246770231.jpg                                                                                                                 
/zy/Public/upload/image/1390625251_716241957.jpg                                                                                                                 
/zy/Public/upload/image/1390626569_1725584879.jpg                                                                                                                
/zy/Public/upload/image/1390630531_744259484.jpg                                                                                                                 
/zy/Public/upload/image/1390630543_174142874.jpg                                                                                                                 
/zy/Public/upload/image/1390630547_1923691144.jpg                                                                                                                
/zy/Public/upload/image/1390630550_2140138014.jpg                                                                                                                
/zy/Public/upload/image/1390630554_1419694659.jpg                                                                                                                
/zy/Public/upload/image/1390630557_1350902606.jpg                                                                                                                
/zy/Public/upload/image/1390631064_1320473113.jpg                                                                                                                
/zy/Public/upload/image/1390631067_747692912.jpg                                                                                                                 
/zy/Public/upload/image/1390631070_764209349.jpg                                                                                                                 
/zy/Public/upload/image/1390631073_76365477.jpg                                                                                                                  
/zy/Public/upload/image/1390631077_1121182122.jpg                                                                                                                
/zy/Public/upload/image/1390631079_227204382.jpg                                                                                                                 
/zy/Public/upload/image/1390631664_475619280.jpg                                                                                                                 
/zy/Public/upload/image/1390631668_325738134.jpg                                                                                                                 
/zy/Public/upload/image/1390631673_51446731.jpg                                                                                                                  
/zy/Public/upload/image/1390631677_2112667923.jpg                                                                                                                
/zy/Public/upload/image/1390631683_158890607.jpg                                                                                                                 
/zy/Public/upload/image/1390631687_1952887224.jpg                                                                                                                
/zy/Public/upload/image/1390631898_635106623.jpg                                                                                                                 
/zy/Public/upload/image/1390631901_1458876675.jpg                                                                                                                
/zy/Public/upload/image/1390631904_1007154827.jpg                                                                                                                
/zy/Public/upload/image/1390631907_1246244788.jpg                                                                                                                
/zy/Public/upload/image/1390631910_1930737206.jpg                                                                                                                
/zy/Public/upload/image/1390631914_363803515.jpg                                                                                                                 
/zy/Public/upload/image/1390632393_1878303522.jpg                                                                                                                
/zy/Public/upload/image/1390632397_438414844.jpg                                                                                                                 
/zy/Public/upload/image/1390632405_2098750577.jpg                                                                                                                
/zy/Public/upload/image/1390632409_721888526.jpg                                                                                                                 
/zy/Public/upload/image/1390632411_1512765151.jpg                                                                                                                
/zy/Public/upload/image/1390632415_564473505.jpg                                                                                                                 
/zy/Public/upload/image/1390633067_1311486159.jpg                                                                                                                
/zy/Public/upload/image/1390633069_707078765.jpg                                                                                                                 
/zy/Public/upload/image/1390633072_17262685.jpg                                                                                                                  
/zy/Public/upload/image/1390633075_486195211.jpg                                                                                                                 
/zy/Public/upload/image/1390633078_152203897.jpg                                                                                                                 
/zy/Public/upload/image/1390633081_1621862163.jpg                                                                                                                
/zy/Public/upload/image/1390633427_1060537532.jpg                                                                                                                
/zy/Public/upload/image/1390633430_1662368616.jpg                                                                                                                
/zy/Public/upload/image/1390633433_2051216048.jpg                                                                                                                
/zy/Public/upload/image/1390633436_1348674608.jpg                                                                                                                
/zy/Public/upload/image/1390633439_1523587318.jpg                                                                                                                
/zy/Public/upload/image/1390633442_1633304194.jpg                                                                                                                
/zy/Public/upload/image/1390635294_1748495874.jpg                                                                                                                
/zy/Public/upload/image/1390635297_1195836009.jpg                                                                                                                
/zy/Public/upload/image/1390635299_138991753.jpg                                                                                                                 
/zy/Public/upload/image/1390635302_1958409918.jpg                                                                                                                
/zy/Public/upload/image/1390635305_1889066533.jpg                                                                                                                
/zy/Public/upload/image/1390635308_175864240.jpg                                                                                                                 
/zy/Public/upload/image/1390635706_640483735.jpg                                                                                                                 
/zy/Public/upload/image/1390635710_2046266671.jpg                                                                                                                
/zy/Public/upload/image/1390635712_119644236.jpg                                                                                                                 
/zy/Public/upload/image/1390635716_719646947.jpg                                                                                                                 
/zy/Public/upload/image/1390635719_2023537028.jpg                                                                                                                
/zy/Public/upload/image/1390635721_1544240832.jpg                                                                                                                
/zy/Public/upload/image/1390636247_1088612064.jpg                                                                                                                
/zy/Public/upload/image/1390636251_1214609846.jpg                                                                                                                
/zy/Public/upload/image/1390636254_338929381.jpg                                                                                                                 
/zy/Public/upload/image/1390636257_1054585611.jpg                                                                                                                
/zy/Public/upload/image/1390636260_179945738.jpg                                                                                                                 
/zy/Public/upload/image/1390636263_1492869056.jpg                                                                                                                
/zy/Public/upload/image/1390890909_285778379.jpg                                                                                                                 
/zy/Public/upload/image/1390890917_992024151.jpg                                                                                                                 
/zy/Public/upload/image/1390890929_1729515662.jpg                                                                                                                
/zy/Public/upload/image/1390890933_1991571958.jpg                                                                                                                
/zy/Public/upload/image/1390890938_787004689.jpg                                                                                                                 
/zy/Public/upload/image/1390890942_1043330687.jpg                                                                                                                
/zy/Public/upload/image/1390891322_1595229606.jpg                                                                                                                
/zy/Public/upload/image/1390891330_1804711541.jpg                                                                                                                
/zy/Public/upload/image/1390891334_303496290.jpg                                                                                                                 
/zy/Public/upload/image/1390891341_1737697820.jpg                                                                                                                
/zy/Public/upload/image/1390891345_767505111.jpg                                                                                                                 
/zy/Public/upload/image/1390891350_32146522.jpg                                                                                                                  
/zy/Public/upload/image/1390891536_1742561265.jpg                                                                                                                
/zy/Public/upload/image/1390891544_464835599.jpg                                                                                                                 
/zy/Public/upload/image/1390891552_1919492562.jpg                                                                                                                
/zy/Public/upload/image/1390891557_308490728.jpg                                                                                                                 
/zy/Public/upload/image/1390891561_985206712.jpg                                                                                                                 
/zy/Public/upload/image/1390891566_1210856714.jpg                                                                                                                
/zy/Public/upload/image/1390891688_906036577.jpg                                                                                                                 
/zy/Public/upload/image/1390891694_897515381.jpg                                                                                                                 
/zy/Public/upload/image/1390891699_875365011.jpg                                                                                                                 
/zy/Public/upload/image/1390891704_1444750212.jpg                                                                                                                
/zy/Public/upload/image/1390891708_1128493841.jpg                                                                                                                
/zy/Public/upload/image/1390891713_2021098560.jpg                                                                                                                
/zy/Public/upload/image/1390891925_330298806.jpg                                                                                                                 
/zy/Public/upload/image/1390891933_448465073.jpg                                                                                                                 
/zy/Public/upload/image/1390891940_817233196.jpg                                                                                                                 
/zy/Public/upload/image/1390891945_2120488672.jpg                                                                                                                
/zy/Public/upload/image/1390891949_1535671466.jpg                                                                                                                
/zy/Public/upload/image/1390891953_813268165.jpg                                                                                                                 
/zy/Public/upload/image/1390892185_212226667.jpg                                                                                                                 
/zy/Public/upload/image/1390892190_306705373.jpg                                                                                                                 
/zy/Public/upload/image/1390892198_1322276145.jpg                                                                                                                
/zy/Public/upload/image/1390892202_1265989415.jpg                                                                                                                
/zy/Public/upload/image/1390892207_1463127848.jpg                                                                                                                
/zy/Public/upload/image/1390892212_1854927508.jpg                                                                                                                
/zy/Public/upload/image/1390892419_1455643568.jpg                                                                                                                
/zy/Public/upload/image/1390892426_259057869.jpg                                                                                                                 
/zy/Public/upload/image/1390892435_1187548590.jpg                                                                                                                
/zy/Public/upload/image/1390892439_1162776656.jpg                                                                                                                
/zy/Public/upload/image/1390892444_2094327962.jpg                                                                                                                
/zy/Public/upload/image/1390892449_1979966198.jpg                                                                                                                
/zy/Public/upload/image/1390892686_1171792786.jpg                                                                                                                
/zy/Public/upload/image/1390892695_438522030.jpg                                                                                                                 
/zy/Public/upload/image/1390892700_979887455.jpg                                                                                                                 
/zy/Public/upload/image/1390892705_317535228.jpg                                                                                                                 
/zy/Public/upload/image/1390892711_548261653.jpg                                                                                                                 
/zy/Public/upload/image/1390892842_473643424.jpg                                                                                                                 
/zy/Public/upload/image/1390892847_246915141.jpg                                                                                                                 
/zy/Public/upload/image/1390892851_1426936587.jpg                                                                                                                
/zy/Public/upload/image/1390892856_1522586056.jpg                                                                                                                
/zy/Public/upload/image/1390892861_499972307.jpg                                                                                                                 
/zy/Public/upload/image/1390892865_113242585.jpg                                                                                                                 
/zy/Public/upload/image/1390892945_1666365470.jpg                                                                                                                
/zy/Public/upload/image/1390892949_396749659.jpg                                                                                                                 
/zy/Public/upload/image/1390892953_1364115306.jpg                                                                                                                
/zy/Public/upload/image/1390892957_654063979.jpg                                                                                                                 
/zy/Public/upload/image/1390892961_1161636961.jpg                                                                                                                
/zy/Public/upload/image/1390892965_1041235584.jpg                                                                                                                
/zy/Public/upload/image/1390893022_1058566844.jpg                                                                                                                
/zy/Public/upload/image/1390893025_1097785985.jpg                                                                                                                
/zy/Public/upload/image/1390893030_13523040.jpg                                                                                                                  
/zy/Public/upload/image/1390893035_669863505.jpg                                                                                                                 
/zy/Public/upload/image/1390893040_385944910.jpg                                                                                                                 
/zy/Public/upload/image/1390893044_127364229.jpg                                                                                                                 
/zy/Public/upload/image/1390893140_87882324.jpg                                                                                                                  
/zy/Public/upload/image/1390893144_446087723.jpg                                                                                                                 
/zy/Public/upload/image/1390893149_419066348.jpg                                                                                                                 
/zy/Public/upload/image/1390893153_90829401.jpg                                                                                                                  
/zy/Public/upload/image/1390893157_645149079.jpg                                                                                                                 
/zy/Public/upload/image/1390893161_1291758547.jpg                                                                                                                
/zy/Public/upload/image/1390893312_981106283.jpg                                                                                                                 
/zy/Public/upload/image/1390893320_457299794.jpg                                                                                                                 
/zy/Public/upload/image/1390893325_832630074.jpg                                                                                                                 
/zy/Public/upload/image/1390893331_1671260309.jpg                                                                                                                
/zy/Public/upload/image/1390893336_1637690231.jpg                                                                                                                
/zy/Public/upload/image/1390893341_7931047.jpg                                                                                                                   
/zy/Public/upload/image/1390893529_598390024.jpg                                                                                                                 
/zy/Public/upload/image/1390893538_592814688.jpg                                                                                                                 
/zy/Public/upload/image/1390893542_276394280.jpg                                                                                                                 
/zy/Public/upload/image/1390893547_39466495.jpg                                                                                                                  
/zy/Public/upload/image/1390893551_2061445216.jpg                                                                                                                
/zy/Public/upload/image/1390893556_662147292.jpg                                                                                                                 
/zy/Public/upload/image/1390893702_941768573.jpg                                                                                                                 
/zy/Public/upload/image/1390893708_1303776736.jpg                                                                                                                
/zy/Public/upload/image/1390893713_632478498.jpg                                                                                                                 
/zy/Public/upload/image/1390893718_594741646.jpg                                                                                                                 
/zy/Public/upload/image/1390893724_489608557.jpg                                                                                                                 
/zy/Public/upload/image/1390893728_2039862328.jpg                                                                                                                
/zy/Public/upload/image/1390893905_1343685322.jpg                                                                                                                
/zy/Public/upload/image/1390893913_729621937.jpg                                                                                                                 
/zy/Public/upload/image/1390893918_402386960.jpg                                                                                                                 
/zy/Public/upload/image/1390893923_101192155.jpg                                                                                                                 
/zy/Public/upload/image/1390893927_1728509164.jpg                                                                                                                
/zy/Public/upload/image/1390893931_812699657.jpg                                                                                                                 
/zy/Public/upload/image/1390894163_1250982640.jpg                                                                                                                
/zy/Public/upload/image/1390894173_1772857693.jpg                                                                                                                
/zy/Public/upload/image/1390894179_301346009.jpg                                                                                                                 
/zy/Public/upload/image/1390894183_249333477.jpg                                                                                                                 
/zy/Public/upload/image/1390894190_164023389.jpg                                                                                                                 
/zy/Public/upload/image/1390894194_1530938085.jpg                                                                                                                
/zy/Public/upload/image/1390894352_1005938360.jpg                                                                                                                
/zy/Public/upload/image/1390894360_1716209608.jpg                                                                                                                
/zy/Public/upload/image/1390894365_830180469.jpg                                                                                                                 
/zy/Public/upload/image/1390894372_128560576.jpg                                                                                                                 
/zy/Public/upload/image/1390894377_1508006725.jpg                                                                                                                
/zy/Public/upload/image/1390894381_1935487356.jpg                                                                                                                
/zy/Public/upload/image/1390894531_390197054.jpg                                                                                                                 
/zy/Public/upload/image/1390894537_176082867.jpg                                                                                                                 
/zy/Public/upload/image/1390894541_1895716292.jpg                                                                                                                
/zy/Public/upload/image/1390894546_1123340355.jpg                                                                                                                
/zy/Public/upload/image/1390894550_1614687727.jpg                                                                                                                
/zy/Public/upload/image/1390894555_513168868.jpg                                                                                                                 
/zy/Public/upload/image/1390894745_1681928695.jpg                                                                                                                
/zy/Public/upload/image/1390894750_2117962617.jpg                                                                                                                
/zy/Public/upload/image/1390894756_1235176425.jpg                                                                                                                
/zy/Public/upload/image/1390894760_510994417.jpg                                                                                                                 
/zy/Public/upload/image/1390894764_1816303030.jpg                                                                                                                
/zy/Public/upload/image/1390894769_238449508.jpg                                                                                                                 
/zy/Public/upload/image/1390894922_245231594.jpg                                                                                                                 
/zy/Public/upload/image/1390894927_2138699239.jpg                                                                                                                
/zy/Public/upload/image/1390894931_238251642.jpg                                                                                                                 
/zy/Public/upload/image/1390894936_1083211303.jpg                                                                                                                
/zy/Public/upload/image/1390894940_223394177.jpg                                                                                                                 
/zy/Public/upload/image/1390894944_1968225495.jpg                                                                                                                
/zy/Public/upload/image/1390895065_786715877.jpg                                                                                                                 
/zy/Public/upload/image/1390895077_1195572024.jpg                                                                                                                
/zy/Public/upload/image/1390895101_593494828.jpg                                                                                                                 
/zy/Public/upload/image/1390895106_17192430.jpg                                                                                                                  
/zy/Public/upload/image/1390895112_1912863077.jpg                                                                                                                
/zy/Public/upload/image/1390895183_764303314.jpg                                                                                                                 
/zy/Public/upload/image/1390895188_1813304492.jpg                                                                                                                
/zy/Public/upload/image/1390895192_132889738.jpg                                                                                                                 
/zy/Public/upload/image/1390895196_208165658.jpg                                                                                                                 
/zy/Public/upload/image/1390895201_1234635769.jpg                                                                                                                
/zy/Public/upload/image/1390895206_1329143019.jpg                                                                                                                
/zy/Public/upload/image/1390895363_588413200.jpg                                                                                                                 
/zy/Public/upload/image/1390895371_1289059347.jpg                                                                                                                
/zy/Public/upload/image/1390895375_727401979.jpg                                                                                                                 
/zy/Public/upload/image/1390895380_2085263625.jpg                                                                                                                
/zy/Public/upload/image/1390895385_443557886.jpg                                                                                                                 
/zy/Public/upload/image/1390895389_944201942.jpg                                                                                                                 
/zy/Public/upload/image/1390895649_1614566987.jpg                                                                                                                
/zy/Public/upload/image/1390895652_1268020945.jpg                                                                                                                
/zy/Public/upload/image/1390895659_353467406.jpg                                                                                                                 
/zy/Public/upload/image/1390895671_2025720249.jpg                                                                                                                
/zy/Public/upload/image/1390895676_2129714616.jpg                                                                                                                
/zy/Public/upload/image/1390895687_1839534927.jpg                                                                                                                
/zy/Public/upload/image/1390895814_79385040.jpg                                                                                                                  
/zy/Public/upload/image/1390895819_1521331207.jpg                                                                                                                
/zy/Public/upload/image/1390895825_1188068039.jpg                                                                                                                
/zy/Public/upload/image/1390895830_511386703.jpg                                                                                                                 
/zy/Public/upload/image/1390895835_699833879.jpg                                                                                                                 
/zy/Public/upload/image/1390895841_1791745359.jpg                                                                                                                
/zy/Public/upload/image/1390895979_966804622.jpg                                                                                                                 
/zy/Public/upload/image/1390895988_1944862433.jpg                                                                                                                
/zy/Public/upload/image/1390895992_1621081336.jpg                                                                                                                
/zy/Public/upload/image/1390896002_426863558.jpg                                                                                                                 
/zy/Public/upload/image/1390896006_1600276713.jpg                                                                                                                
/zy/Public/upload/image/1390896012_1273363274.jpg                                                                                                                
/zy/Public/upload/image/1390896130_2034515799.jpg                                                                                                                
/zy/Public/upload/image/1390896134_1491746763.jpg                                                                                                                
/zy/Public/upload/image/1390896139_2110787044.jpg                                                                                                                
/zy/Public/upload/image/1390896148_1528131452.jpg                                                                                                                
/zy/Public/upload/image/1390896152_705378687.jpg                                                                                                                 
/zy/Public/upload/image/1390896157_2005907605.jpg                                                                                                                
/zy/Public/upload/image/1390896288_970246419.jpg                                                                                                                 
/zy/Public/upload/image/1390896293_2103488028.jpg                                                                                                                
/zy/Public/upload/image/1390896303_1553790833.jpg                                                                                                                
/zy/Public/upload/image/1390896309_1370341142.jpg                                                                                                                
/zy/Public/upload/image/1390896317_230558692.jpg                                                                                                                 
/zy/Public/upload/image/1390896321_884691073.jpg                                                                                                                 
/zy/Public/upload/image/1390896495_2050384385.jpg                                                                                                                
/zy/Public/upload/image/1390896501_33740048.jpg                                                                                                                  
/zy/Public/upload/image/1390896506_1429855730.jpg                                                                                                                
/zy/Public/upload/image/1390896513_1590092915.jpg                                                                                                                
/zy/Public/upload/image/1390896517_593455630.jpg                                                                                                                 
/zy/Public/upload/image/1390896522_1930243484.jpg                                                                                                                
/zy/Public/upload/image/1390896598_216035026.jpg                                                                                                                 
/zy/Public/upload/image/1390896603_2043142461.jpg                                                                                                                
/zy/Public/upload/image/1390896608_318470395.jpg                                                                                                                 
/zy/Public/upload/image/1390896613_1434320809.jpg                                                                                                                
/zy/Public/upload/image/1390896618_992900691.jpg                                                                                                                 
/zy/Public/upload/image/1390896623_138471824.jpg                                                                                                                 
/zy/Public/upload/image/1390896761_1866629419.jpg                                                                                                                
/zy/Public/upload/image/1390896766_1242196540.jpg                                                                                                                
/zy/Public/upload/image/1390896770_1428302618.jpg                                                                                                                
/zy/Public/upload/image/1390896775_2079538138.jpg                                                                                                                
/zy/Public/upload/image/1390896780_1954066013.jpg                                                                                                                
/zy/Public/upload/image/1390896784_1387325150.jpg                                                                                                                
/zy/Public/upload/image/1390896888_1121551771.jpg                                                                                                                
/zy/Public/upload/image/1390896892_245947875.jpg                                                                                                                 
/zy/Public/upload/image/1390896897_1413394387.jpg                                                                                                                
/zy/Public/upload/image/1390896901_1491127429.jpg                                                                                                                
/zy/Public/upload/image/1390896906_209123496.jpg                                                                                                                 
/zy/Public/upload/image/1390896910_548357473.jpg                                                                                                                 
/zy/Public/upload/image/1391847377_379425481.jpg                                                                                                                 
/zy/Public/upload/image/1391847387_497199861.jpg                                                                                                                 
/zy/Public/upload/image/1391847398_79072028.jpg                                                                                                                  
/zy/Public/upload/image/1391847402_1960175061.jpg                                                                                                                
/zy/Public/upload/image/1391847410_1865632061.jpg                                                                                                                
/zy/Public/upload/image/1391847414_136746547.jpg                                                                                                                 
/zy/Public/upload/image/1391913725_487635902.jpg                                                                                                                 
/zy/Public/upload/image/1391913730_1268147453.jpg                                                                                                                
/zy/Public/upload/image/1391913734_1174564548.jpg                                                                                                                
/zy/Public/upload/image/1391913738_418588270.jpg                                                                                                                 
/zy/Public/upload/image/1391913743_681063107.jpg                                                                                                                 
/zy/Public/upload/image/1391913747_1886480033.jpg                                                                                                                
/zy/Public/upload/image/1.jpg                                                                                                                                    
/js/jquery-1.7.2.min.js /images/index/pic1.png /images/welcome/decorate.png /images/index/pic2.png}

def async_fetch(url)
	f = Fiber.current
	http = EventMachine::HttpRequest.new(url, :connect_timeout => 10, :inactivity_timeout => 20).get

	http.callback { f.resume(http) }
	http.errback  { f.resume(http) }

	Fiber.yield

	if http.error
		p [:HTTP_ERROR, http.error]
	end

	http
end

EventMachine.run do
	Fiber.new{

		list.each{|x|
		data = async_fetch("http://www.chingyu.net#{x}")    
		puts "Fetched : #{data.response_header.raw}"
		}
		#puts "Setting up HTTP request #2"
		#data = async_fetch('http://www.yahoo.com/')
		#puts "Fetched page #2: #{data.response_header.status}"

		#puts "Setting up HTTP request #3"
		#data = async_fetch('http://group.bj.chinamobile.com/')
		#puts "Fetched page #3: #{data.response_header.raw}"

		EventMachine.stop
	}.resume
end

